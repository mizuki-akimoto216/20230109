<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New User Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <style>
        /* .container {
            height: 100vh;
        } */

        .flexCenter {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .form {
            width: 500px;
            border: 1px solid gray;
            border-radius: 10px;
            padding: 30px;
        }
    </style>
</head>
<body class="container">
    <div class="flexCenter">
        <div class="form">
            <div class="mb-3">
                <label for="email" class="form-label">Email address</label>
                <input type="email" class="form-control" id="email" placeholder="name@example.com">
                <div class="valid-feedback">Great job!</div>
                <div class="invalid-feedback">Incorrect email format: Please use user@domain.com</div>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter password">
                <div class="valid-feedback">Great job!</div>
                <div class="invalid-feedback">Password requirements not met</div>
            </div>
            <div class="mb-3">
                <label for="retypePassword" class="form-label">Retype Password</label>
                <input type="email" class="form-control" id="retypePassword" placeholder="Retype password">
                <div class="valid-feedback">Great job!</div>
                <div class="invalid-feedback">Password do not match!</div>
            </div>
            <buton class="btn btn-primary">
                Sign up!
            </buton>
        </div>
    </div>
</body>
<script>
    // THIS!!! - corresponds to the object reffered to 
    $(document).ready(function(){
        $('#email').keyup(function(){

            // 文字入力したときに動くか確認
            //console.log('key press');

            console.log(checkEmail($(this).val()));
            if(checkEmail($(this).val())) {
                $(this).removeClass('is-invalid').addClass('is-valid');
            } else {
                $(this).removeClass('is-valid').addClass('is-invalid');               
            }          

        })

        $('#password').keyup(function(){
            
            console.log($(this).val());

            if(checkPassword($(this).val())) {
                $(this).removeClass('is-invalid').addClass('is-valid');
            } else {
             
               $(this).removeClass('is-valid').addClass('is-invalid');
            }

        })

        $('#retypePassword').keyup(function(){
            if(checkRetypePassword($(this).val())) {
                $(this).removeClass('is-invalid').addClass('is-valid');
            } else {
             
               $(this).removeClass('is-valid').addClass('is-invalid');
            }
        })

        function checkEmail(email) {
            //write some logic here to compare the email and return or false
            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email))
            {
                return (true)
            }
            return (false)
        }

        function checkPassword(password) {
            var pwdLength = /^.{10,16}$/;
            var pwdUpper = /[A-Z]+/;
            var pwdLower = /[a-z]+/;
            var pwdNumber = /[0-9]+/;
            var pwdSpecial = /[!@#$%^&()'[\]"?+-/*={}.,;:_]+/;

            if(pwdLength.test(password)) {
                return (true)
            } else {
                return (false)           
            }
            
            if(pwdUpper.test(password) && pwdLower.test(password)) {
                return (true)
            } else {
                return (false)           
            }
            
            if(pwdNumber.test(password)) {
                return (true)
            } else {
                return (false)           
            }
            
            if(pwdSpecial.test(password)) {
                return (true)
            } else {
                return (false)           
            }
        }

        function checkRetypePassword(retypePassword) {
            var password = $("#password").val();
            if(password == retypePassword) {
                return (true)
            } else {
                return (false)           
            }
        }
    })


</script>
</html>